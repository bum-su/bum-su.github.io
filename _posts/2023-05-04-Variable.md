---
layout: post
title: c++ 변수
date: 2023-05-04 18:05:00 +0900
categories: C++ Variable
tags: Memory Variable
---

# 서론
변수는 프로그램에서 사용되는 데이터를 저장하는 메모리 공간을 의미한다.

변수에는 고유한 이름(변수명)이 있으며, 이를 통해 메모리에 접근하여 값을 저장하거나 불러올 수 있다.
<br/><br/>
그럼 araboza

## 지역 변수
----
지역 변수는 함수 또는 블록 내에서 선언되며, 이를 통해 해당 범위에서만 접근이 가능하게 됩니다. 

이러한 변수들은 메모리의 스택 영역에 저장되는 특성을 가지고 있습니다. 함수의 실행이 종료되면 이 변수들은 자동으로 메모리에서 해제되어 메모리 관리에 유리합니다. 

그러나 지역 변수는 자동으로 초기화되지 않기 때문에, 사용 전에는 반드시 초기화 과정을 거쳐야 합니다. 또한, 해당 함수나 블록이 호출될 때마다 새로운 메모리 공간이 할당되어 사용되므로, 이전 호출 시의 값이 유지되지 않는 특징을 가지고 있습니다. 

이러한 특성 때문에, 지역 변수는 함수 내에서 임시적으로 사용되는 데이터를 저장하는 데 적합합니다.

```cpp 
#include <iostream>

void exampleFunction() 
{
    int localVar = 5; // localVar is a local variable
    std::cout << "Local variable value: " << localVar << std::endl;
}

int main()
 {
    exampleFunction();
    // localVar cannot be accessed here, as it's limited to the scope of exampleFunction()
    return 0;
}
```

## 전역 변수
----------

전역 변수는 함수 외부에서 선언되며, 이를 통해 프로그램의 모든 함수와 클래스에서 접근할 수 있습니다. 

초기화 여부에 따라 메모리의 DATA 영역 또는 BSS 영역에 저장됩니다. 전역 변수는 프로그램이 시작될 때 메모리에 생성되고, 프로그램이 종료될 때까지 그 메모리 공간을 유지합니다. 

프로그램의 실행이 완료되면, 이 변수들은 자동으로 메모리에서 해제됩니다. 또한, 전역 변수는 명시적으로 초기화되지 않으면 컴파일러에 의해 자동으로 0 또는 nullptr로 초기화됩니다. 

이러한 특성들은 전역 변수가 프로그램 전체에서 공유되어 사용되는 변수임을 나타냅니다.


```cpp
#include <iostream>

int globalVar = 10; // globalVar is a global variable

void displayGlobalVar()
 {
    std::cout << "Global variable value: " << globalVar << std::endl;
}

int main()
 {
    displayGlobalVar(); // Global variable value: 10
    globalVar = 20;
    displayGlobalVar(); // Global variable value: 20
    return 0;
}
```


## 정적 변수
---------
정적 변수는 함수 내부 또는 외부에서 선언할 수 있으며, 이에 따라 선언된 범위 내에서만 접근이 가능합니다. 이러한 변수는 프로그램이 실행되는 전체 기간 동안 존재하며, 초기화 시점에 메모리가 할당되고 프로그램 종료 시 메모리에서 해제됩니다.

또한, 정적 변수는 함수 호출이 이루어지는 사이에도 그 값을 유지하며, 함수가 종료된 이후에도 메모리에 그 값이 유지됩니다. 이는 전역 변수와 함께 저장되어 프로그램 실행 동안 계속해서 메모리에 유지되는 특성을 보여줍니다.

정적 변수는 명시적으로 초기화하지 않으면 자동으로 0으로 초기화되는 특성을 가지고 있습니다. 이 초기화는 변수 선언 시점에 단 한 번만 이루어집니다. 

사용 범위에 따라, 이러한 변수는 정적 지역 변수 또는 정적 전역 변수로 분류됩니다.


```cpp
#include <iostream>

// 정적 전역 변수 정의
static int static_global_var = 0;

void increment() {
    // 정적 지역 변수 정의
    static int static_local_var = 0;

    static_local_var++;
    static_global_var++;

    std::cout << "정적 지역 변수: " << static_local_var << std::endl;
    std::cout << "정적 전역 변수: " << static_global_var << std::endl;
}

int main() {
    increment(); // 첫 번째 호출
    increment(); // 두 번째 호출
    increment(); // 세 번째 호출

    return 0;
}
```

**위 코드는 정적 지역 변수, 정적 전역 변수에 대한 예시 코드이다.**

## 동적 변수
------------
동적 변수는 포인터를 통해 접근하며, 메모리의 할당과 해제 모두 포인터를 사용하여 수행됩니다. 이러한 변수들은 메모리의 힙 영역에 할당되는 특성을 가지고 있습니다.

동적 변수의 생명주기는 메모리가 할당된 시점부터 'delete' 또는 'free' 연산자를 사용하여 명시적으로 해제되는 시점까지 입니다. 동적 변수가 메모리에서 해제되지 않은 상태에서 해당 포인터가 덮여쓰여지거나 범위를 벗어나게 되면, 메모리 누수가 발생할 수 있습니다.

이는 동적 변수의 관리가 프로그래머의 책임 하에 있음을 의미합니다. 마지막으로, 동적 할당은 프로그램 실행 중에 필요한 메모리 공간의 크기를 결정하거나, 더 이상 필요하지 않은 메모리 공간을 해제하는 데 사용됩니다. 이러한 특성들로 인해 동적 변수는 유연한 메모리 관리를 가능하게 합니다.

```cpp
#include <iostream>

int main() {
    int* dynamicVar = new int; // 동적 변수 할당
    *dynamicVar = 42; // 동적 변수 초기화

    std::cout << "Dynamic variable: " << *dynamicVar << std::endl; // Dynamic variable: 42

    delete dynamicVar; // 동적 변수 메모리 해제
    dynamicVar = nullptr; // 포인터 초기화

    return 0;
}
```

# 정리
--------------
1. **지역 변수**
   - 함수 또는 블록 내에서 선언되며, 선언된 범위에서만 접근 가능하다.
   - 메모리의 스택 영역에 저장된다.
   - 함수가 종료되면 자동으로 메모리에서 해제된다.
   - 자동으로 초기화되지 않아, 사용 전에 반드시 초기화가 필요하다.
   - 해당 함수나 블록이 호출될 때마다 새로운 메모리 공간이 할당되며, 이전 호출 시의 값이 유지되지 않는다.

2. **전역 변수**
   - 함수 외부에서 선언되어 프로그램의 모든 함수와 클래스에서 접근 가능하다.
   - 초기화되면 DATA 영역, 초기화되지 않으면 BSS 영역에 메모리에 저장된다.
   - 프로그램이 시작할 때 생성되어 종료될 때까지 메모리에 유지된다.
   - 프로그램이 종료되는 시점에 메모리에서 해제된다.
   - 명시적으로 초기화되지 않으면 컴파일러에 의해 자동으로 0 또는 nullptr로 초기화된다.

3. **정적 변수**
   - 함수 내부 또는 외부에서 선언 가능하며, 선언된 범위 내에서만 접근할 수 있다.
   - 프로그램의 전체 실행 시간 동안 존재하며, 초기화되는 시점에 메모리가 할당되고 종료 시 해제된다.
   - 함수 호출 사이에서 값을 유지하며, 함수가 종료된 후에도 메모리에 유지된다.
   - 전역 변수와 함께 저장되며, 프로그램의 실행 시간 동안 메모리가 유지된다. (BSS 또는 DATA 영역)
   - 명시적으로 초기화하지 않으면 자동으로 0으로 초기화되며, 이는 변수 선언 시점에 단 한 번만 이루어진다.
   - 사용 범위에 따라 정적 지역 변수, 정적 전역 변수로 나뉜다.

4. **동적 변수**
   - 포인터를 통해 접근하며, 메모리 할당과 해제에 포인터를 사용한다.
   - 메모리의 힙 영역에 할당된다.
   - 생명주기는 메모리가 할당된 시점부터 'delete' 또는 'free' 연산자를 사용하여 명시적으로 해제될 때 까지.
   - 동적 변수가 해제되지 않은 상태에서 포인터가 덮여쓰여지거나 범위를 벗어나면 메모리 누수가 발생할 수 있다.
   - 동적 할당은 프로그램 실행 중에 메모리 공간의 크기를 결정하거나 해제하는 데 사용된다.